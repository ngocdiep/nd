<div *ngFor="let comment of comments.nodes">
  <p [innerHTML]="comment.content | safeHtml"></p>
  <button (click)="showReplyForm(comment.id)">Reply1</button>
  <form *ngIf="showReply[comment.id]" [formGroup]="form" (ngSubmit)="addReply(comments.nodes, comment.id)">
    <quill-editor #contentInput style="width: 100%; height: 1000px;" placeholder="Enter Content" id="content"
      formControlName="content"></quill-editor>
    <input type="submit" value="Comment">
  </form>

  <div class="replies">
    <div *ngFor="let reply of comment.postCommentsByParentId.nodes">
      <p [innerHTML]="reply.content | safeHtml"></p>
      <button (click)="showReplyForm(reply.id)">Sub Reply</button>
      <form *ngIf="showReply[reply.id]" [formGroup]="form" (ngSubmit)="addReply(comment.postCommentsByParentId.nodes, reply.id)">
        <quill-editor #contentInput style="width: 100%; height: 1000px;" placeholder="Enter Content" id="content"
          formControlName="content"></quill-editor>
        <input type="submit" value="Comment">
      </form>
      <div class="replies">
        <app-comment-list *ngIf="reply.postCommentsByParentId.nodes" [comments]="reply.postCommentsByParentId"
          [postId]="postId"></app-comment-list>
      </div>
      <div class="replies">
        <ng-container *ngIf="reply.postCommentsByParentId.nodes; else showReplies">
          <button *ngIf="reply.postCommentsByParentId.totalCount > reply.postCommentsByParentId.nodes.length"
            (click)="showMoreComments2(reply, reply.id, reply.postCommentsByParentId.nodes.length)">Show replies1
            ({{reply.postCommentsByParentId.totalCount - reply.postCommentsByParentId.nodes.length}})</button>
        </ng-container>
        <ng-template #showReplies>
            <button *ngIf="reply.postCommentsByParentId.totalCount > 0"
                (click)="showMoreComments2(reply, reply.id, 0)">Show replies2
                ({{reply.postCommentsByParentId.totalCount}})</button>
        </ng-template>
      </div>
    </div>
    <button *ngIf="comment.postCommentsByParentId.pageInfo.hasNextPage"
      (click)="showMoreComments2(comment, comment.postCommentsByParentId.nodes[0].parentId, comment.postCommentsByParentId.nodes.length)">
      Show replies3
      ({{comment.postCommentsByParentId.totalCount - comment.postCommentsByParentId.nodes.length}})</button>
  </div>
</div>